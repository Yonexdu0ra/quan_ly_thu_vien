<h1 class="mb-4">Danh sách người dùng</h1>
<form class="mb-3" method="GET" action="/users">
  <div class="d-flex flex-row gap-2">
    <input
      type="text"
      name="search"
      class="form-control"
      placeholder="Tìm kiếm người dùng..."
      value="<%= query.search %>"
    />
    <select class="form-select" name="sort">
      <option value="DESC" <%= query.sort === 'DESC' ? 'selected' : '' %>>
        Người dùng mới nhất
      </option>
      <option value="ASC" <%= query.sort === 'ASC' ? 'selected' : '' %>>
        Người dùng cũ nhất
      </option>
    </select>
  </div>
  <button class="btn btn-primary my-2" type="submit">Tìm kiếm</button>
<div class="table-responsive">

</form>

<% if (users && users.length > 0) { %>
<div class="table-responsive">
  <table class="table table-bordered table-striped align-middle text-center">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Họ tên</th>
        <th>Email</th>
        <th>Địa chỉ</th>
        <th>Số điện thoại</th>
        <th>Hành động</th>
      </tr>
    </thead>
    <tbody>
      <% users.forEach(user => { %>
      <tr>
        <td><%= user.id %></td>
        <td><%= user.fullname %></td>
        <td class="text-truncate" style="max-width: 200px;" data-bs-toggle="tooltip" title="<%= user.email %>">
          <%= user.email %>
        </td>
        <td class="text-truncate" style="max-width: 250px;" data-bs-toggle="tooltip" title="<%= user.address %>">
          <%= user.address %>
        </td>
        <td><%= user.phone %></td>
        <td>
          <a href="/users/<%= user.id %>" class="btn btn-info btn-sm">Xem</a>
          <a href="/users/edit/<%= user.id %>" class="btn btn-warning btn-sm">Sửa</a>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>
</div>
<% } else { %>
<div class="alert alert-info">Không có người dùng nào.</div>
<% } %>

</div>
<div class="d-flex justify-content-center gap-4 align-items-center mt-3">
  <a
    class="btn btn-primary"
    <%= page <= 1 ? "hidden" : "" %>
    href="?page=<%= page - 1 %>&sort=<%= query.sort %>&search=<%= query.search %>"
    >Trang trước</a
  >
  <span><%= page %> / <%= totalPages %></span>
  <a
    class="btn btn-primary"
    <%= page >= totalPages ? "hidden" : "" %>
    href="?page=<%= page + 1 %>&sort=<%= query.sort %>&search=<%= query.search %>"
    >Trang sau</a
  >
</div>