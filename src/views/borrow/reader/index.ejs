<h1 class="mb-4">Danh sách phiếu mượn</h1>
<a href="/borrows/reader/add" class="btn btn-primary mb-3">Thêm phiếu mượn</a>
<form action="">
  <input type="text" class="form-control" placeholder="Tìm kiếm phiếu mượn..." name="search" value="<%= typeof search !== 'undefined' ? search : '' %>"/>
  <button class="btn btn-outline-secondary mt-2" type="submit">Tìm kiếm</button>
</form>
<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>ID</th>
      <th>Sách</th>
      <th>Người mượn</th>
      <th>Ngày mượn</th>
      <th>Ngày hẹn trả</th>
      <th>Ngày trả</th>
      <th>Ngày lấy sách</th>
      <th>Trạng thái</th>
      <th>Hành động</th>
    </tr>
  </thead>
  <tbody>
    <% borrows.forEach(b => { %>
    <tr>
      <td><%= b.id %></td>
      <td><%= b.book.title %></td>
      <td><%= b.borrower.fullname %></td>
      <td><%= new Date(b.borrow_date).toLocaleDateString() %></td>
      <td>
        <%= b.due_date ? new Date(b.due_date).toLocaleDateString() : '' %>
      </td>
      <td>
        <%= b.return_date ? new Date(b.return_date).toLocaleDateString() : '' %>
      </td>
      <td>
        <%= b.pickup_date ? new Date(b.pickup_date).toLocaleDateString() : '' %>
      </td>
      <td><%= b.status %></td>
      <td>
        <a href="/borrows/reader/detail/<%= b.id %>" class="btn btn-info btn-sm"
          >Xem chi tiết</a
        >
       <% if(b.status === 'Đang yêu cầu mượn') { %> 
         <a
          href="/borrows/reader/cancel/<%= b.id %>"
          class="btn btn-danger btn-sm"
          >Hủy</a >
        
        <% } %>

      </td>
    </tr>
    <% }) %>
  </tbody>
</table>
<div class="d-flex justify-content-center gap-4 align-items-center mt-3">
    <span class="btn btn-primary">trang trước</span>
    <span>1 / 2</span>
    <span class="btn btn-primary">trang sau</span>
  </div>